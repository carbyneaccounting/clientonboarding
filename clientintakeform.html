<!-- clientintakeform.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Client Intake Form</title>

  <style>
    :root{
      --ci-blue:#00305B;
      --ci-ink:#0f172a;
      --ci-muted:#475569;
      --ci-border:rgba(0,0,0,.12);
      --ci-radius:14px;
    }

    .ci-wrap{
      width:100%;
      padding-top:2px; /* moves form up a bit */
    }

    .ci-h2{
      font-size:26px;
      font-weight:950;
      color:var(--ci-blue);
      margin:4px 0 0 0;
      letter-spacing:.2px;
    }

    .ci-section{
      margin-top:14px; /* space between Client Intake Form and Business Information */
    }

    .ci-section-title{
      font-size:14px;
      font-weight:950;
      color:var(--ci-ink);
      margin:0 0 12px 0;
      letter-spacing:.2px;
    }

    .ci-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
    }

    .ci-grid.three{
      grid-template-columns:1fr .55fr .55fr;
    }

    @media (max-width: 860px){
      .ci-grid,
      .ci-grid.three{
        grid-template-columns:1fr;
      }
    }

    .ci-field{min-width:0}

    .ci-label{
      font-size:12px;
      font-weight:900;
      color:var(--ci-ink);
      margin:0 0 8px 0;
      letter-spacing:.2px;
    }

    .ci-input,
    .ci-select{
      width:100%;
      padding:13px 14px;
      border-radius:14px;
      border:1px solid var(--ci-border);
      background:rgba(255,255,255,.92);
      outline:none;
      font-size:14px;
      font-weight:800;
      color:var(--ci-ink);
      box-shadow:0 10px 18px rgba(0,0,0,.06);
      transition:border-color .2s ease, box-shadow .2s ease;
    }

    .ci-input:focus,
    .ci-select:focus{
      border-color:rgba(0,48,91,.60);
      box-shadow:0 0 0 3px rgba(0,48,91,.12), 0 12px 22px rgba(0,0,0,.08);
    }

    .ci-inline-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }

    .ci-checkbox{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:900;
      color:var(--ci-ink);
      white-space:nowrap;
      user-select:none;
    }
    .ci-checkbox input{
      width:16px;height:16px;
      accent-color:var(--ci-blue);
      cursor:pointer;
    }
  </style>
</head>

<body>
  <template id="carbyne_client_intake">
    <div class="ci-wrap">
      <div class="ci-h2">Client Intake Form</div>

      <div class="ci-section">
        <div class="ci-section-title">Business Information</div>

        <!-- Row 1: Business Name + FEIN -->
        <div class="ci-grid">
          <div class="ci-field">
            <div class="ci-label">Name of Business</div>
            <input class="ci-input" id="bi_name" type="text" placeholder="Name of Business" autocomplete="organization">
          </div>

          <div class="ci-field">
            <div class="ci-inline-row">
              <div class="ci-label" style="margin:0;">Federal Employer Identification Number (FEIN)</div>
              <label class="ci-checkbox" for="bi_no_fein">
                <input id="bi_no_fein" type="checkbox">
                No FEIN
              </label>
            </div>
            <input class="ci-input" id="bi_fein" type="text" placeholder="XX-XXXXXXX" inputmode="numeric" autocomplete="off">
          </div>
        </div>

        <!-- Row 2: Full Name + Title -->
        <div style="height:14px"></div>
        <div class="ci-grid">
          <div class="ci-field">
            <div class="ci-label">Full Name of Person Completing this Agreement</div>
            <input class="ci-input" id="bi_fullname" type="text" placeholder="Full Name" autocomplete="name">
          </div>
          <div class="ci-field">
            <div class="ci-label">Title</div>
            <input class="ci-input" id="bi_title" type="text" placeholder="Title" autocomplete="organization-title">
          </div>
        </div>

        <!-- Row 3: Address + Suite -->
        <div style="height:14px"></div>
        <div class="ci-grid">
          <div class="ci-field">
            <div class="ci-label">Business Address</div>
            <input class="ci-input" id="bi_address" type="text" placeholder="Business Address" autocomplete="street-address">
          </div>
          <div class="ci-field">
            <div class="ci-label">Suite / Unit Number</div>
            <input class="ci-input" id="bi_suite" type="text" placeholder="Suite / Unit Number" autocomplete="address-line2">
          </div>
        </div>

        <!-- Row 4: City + State + Zip -->
        <div style="height:14px"></div>
        <div class="ci-grid three">
          <div class="ci-field">
            <div class="ci-label">City</div>
            <input class="ci-input" id="bi_city" type="text" placeholder="City" autocomplete="address-level2">
          </div>

          <div class="ci-field">
            <div class="ci-label">State</div>
            <select class="ci-select" id="bi_state" autocomplete="address-level1">
              <option value="" selected>Select</option>
              <option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option>
              <option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option>
              <option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option>
              <option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option>
              <option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option>
              <option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option>
              <option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option>
              <option value="VT">Vermont</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option><option value="WY">Wyoming</option>
              <option value="DC">District of Columbia</option>
            </select>
          </div>

          <div class="ci-field">
            <div class="ci-label">Zip Code</div>
            <input class="ci-input" id="bi_zip" type="text" placeholder="Zip Code" inputmode="numeric" autocomplete="postal-code">
          </div>
        </div>

        <!-- Row 5: Phone + Email -->
        <div style="height:14px"></div>
        <div class="ci-grid">
          <div class="ci-field">
            <div class="ci-label">Business Phone Number</div>
            <input class="ci-input" id="bi_phone" type="tel" placeholder="(XXX) XXX-XXXX" inputmode="numeric" autocomplete="tel">
          </div>
          <div class="ci-field">
            <div class="ci-label">Business Email Address</div>
            <input class="ci-input" id="bi_email" type="email" placeholder="Business Email Address" autocomplete="email">
          </div>
        </div>

        <!-- Row 6: POC full width -->
        <div style="height:14px"></div>
        <div class="ci-grid">
          <div class="ci-field" style="grid-column:1 / -1;">
            <div class="ci-label">Business Point of Contact</div>
            <input class="ci-input" id="bi_poc" type="text" placeholder="Business Point of Contact" autocomplete="name">
          </div>
        </div>
      </div>
    </div>
  </template>

  <script>
    window.carbyne_client_intake_mount = function ({ root }) {
      const $ = (id) => root.querySelector("#" + id);

      const phone = $("bi_phone");
      const zip = $("bi_zip");
      const fein = $("bi_fein");
      const noFein = $("bi_no_fein");

      function digitsOnly(v){ return (v || "").replace(/\D/g, ""); }

      function formatPhone(v){
        const d = digitsOnly(v).slice(0,10);
        const a = d.slice(0,3);
        const b = d.slice(3,6);
        const c = d.slice(6,10);
        if (d.length <= 3) return a ? `(${a}` : "";
        if (d.length <= 6) return `(${a}) ${b}`;
        return `(${a}) ${b}-${c}`;
      }

      function formatFEIN(v){
        const d = digitsOnly(v).slice(0,9);
        const a = d.slice(0,2);
        const b = d.slice(2,9);
        if (d.length <= 2) return a;
        return `${a}-${b}`;
      }

      function handlePhone(){
        const cur = phone.value;
        phone.value = formatPhone(cur);
      }

      function handleZip(){
        // allow digits only; do not force length
        zip.value = digitsOnly(zip.value);
      }

      function handleFein(){
        if (noFein.checked) return;
        fein.value = formatFEIN(fein.value);
      }

      function setNoFeinState(){
        if (noFein.checked){
          fein.value = "Unavailable";
          fein.readOnly = true;
        } else {
          fein.readOnly = false;
          fein.value = formatFEIN(fein.value);
        }
      }

      // Wire
      phone.addEventListener("input", handlePhone);
      phone.addEventListener("blur", handlePhone);

      zip.addEventListener("input", handleZip);
      zip.addEventListener("blur", handleZip);

      fein.addEventListener("input", handleFein);
      fein.addEventListener("blur", handleFein);

      noFein.addEventListener("change", setNoFeinState);

      // Init
      setNoFeinState();

      return function unmount(){};
    };
  </script>
</body>
</html>
